# 보안 규칙

> 카테고리: SEC-RULE
> 이 문서의 규칙은 입력 검증, 감사 필드, 인증/인가를 정의합니다.

## 입력 검증

### RULE-SEC-001: 모든 외부 입력 검증
- **원칙**: 외부에서 들어오는 모든 입력(API 파라미터, 쿼리 스트링, 요청 본문)은 반드시 검증한다
- **위반 기준**: 검증 없이 외부 입력을 비즈니스 로직에 직접 전달하면 위반
- **검증 방법**: Controller/Handler 레벨에서 입력 검증 로직 존재 확인
- **예외**: 없음

### RULE-SEC-002: SQL 인젝션 방지
- **원칙**: 파라미터화된 쿼리 또는 ORM을 사용한다
- **위반 기준**: 문자열 연결로 SQL 쿼리를 생성하면 위반
- **검증 방법**: 쿼리 코드에서 문자열 보간/연결 사용 여부 확인
- **예외**: 없음 (절대 규칙)

### RULE-SEC-003: XSS 방지
- **원칙**: 사용자 입력을 HTML에 렌더링할 때 이스케이프 처리한다
- **위반 기준**: 사용자 입력을 이스케이프 없이 HTML에 삽입하면 위반
- **검증 방법**: 템플릿 엔진의 자동 이스케이프 설정 확인, dangerouslySetInnerHTML 등 사용 여부
- **예외**: 없음

## 감사 필드

### RULE-SEC-010: 감사 컬럼
- **원칙**: {{AUDIT_FIELDS_DESC}}
- **위반 기준**: 엔티티에 정해진 감사 필드가 누락되면 위반
- **검증 방법**: 엔티티/모델 정의에서 감사 필드 존재 확인
- **예외**: 임시 데이터, 로그성 엔티티

### RULE-SEC-011: 소프트 삭제
- **원칙**: {{SOFT_DELETE_DESC}}
- **위반 기준**: 정해진 소프트 삭제 정책을 따르지 않으면 위반
- **검증 방법**: DELETE 오퍼레이션에서 소프트 삭제 로직 확인
- **예외**: 임시 데이터, 세션, 캐시

## 인증/인가

### RULE-SEC-020: 인증 필수
- **원칙**: {{AUTH_POLICY_DESC}}
- **위반 기준**: 보호된 엔드포인트에 인증 검사가 없으면 위반
- **검증 방법**: 라우트/미들웨어에서 인증 검사 존재 확인
- **예외**: 공개 API (로그인, 헬스체크, 공개 리소스)

### RULE-SEC-021: 권한 검사
- **원칙**: {{AUTHZ_POLICY_DESC}}
- **위반 기준**: 권한이 필요한 오퍼레이션에 권한 검사가 없으면 위반
- **검증 방법**: 비즈니스 로직 또는 미들웨어에서 권한 검사 존재 확인
- **예외**: 본인 리소스 조회

## 민감 데이터

### RULE-SEC-030: 민감 데이터 로깅 금지
- **원칙**: 비밀번호, 토큰, 개인정보를 로그에 기록하지 않는다
- **위반 기준**: 로그 출력문에 민감 필드가 포함되면 위반
- **검증 방법**: 로깅 코드에서 민감 필드명 검색
- **예외**: 마스킹 처리된 경우 허용

{{#if CUSTOM_SEC_RULES}}
## 프로젝트 커스텀 보안 규칙

{{CUSTOM_SEC_RULES}}
{{/if}}
