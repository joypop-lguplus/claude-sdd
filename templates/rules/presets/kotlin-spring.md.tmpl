# Kotlin + Spring 프리셋 규칙

> 이 프리셋은 Kotlin + Spring Boot 프로젝트에 최적화된 규칙을 제공합니다.

## 변수 매핑

```yaml
# architecture.md.tmpl
ARCH_HEXAGONAL: false
ARCH_LAYERED: true
ARCH_DDD: false
MODULE_STRUCTURE_DESC: "기능별 패키지 구조 (com.project.domain.module)"

# coding-conventions.md.tmpl
NAMING_CONVENTION_DESC: "클래스는 PascalCase, 함수/변수는 camelCase, 상수는 UPPER_SNAKE_CASE"
NAMING_PATTERN: "PascalCase(클래스), camelCase(함수/변수)"
FILE_NAMING_DESC: "클래스명과 동일한 파일명 (UserController.kt)"
DTO_SUFFIX: "Dto"
IMPORT_ORDER_DESC: "java → javax → org → com → 프로젝트 패키지"

# api-design.md.tmpl
URL_PATTERN_DESC: "REST 표준 URL — 복수형 명사, 소문자, 하이픈 구분"
URL_PATTERN_EXAMPLE: "/api/v1/users, /api/v1/users/{id}"
RESPONSE_FORMAT_DESC: "표준 응답 래퍼 — ApiResponse<T>(data, message, timestamp)"
ERROR_FORMAT_DESC: "에러 응답 — ErrorResponse(code, message, details)"
API_VERSIONING_DESC: "URL 경로 기반 버저닝 (/api/v1/)"

# error-handling.md.tmpl
EXCEPTION_HIERARCHY_DESC: "sealed class를 활용한 예외 계층 (BusinessException / SystemException)"
ERROR_CODE_FORMAT_DESC: "에러 코드 enum: MODULE_ERROR_TYPE (예: UserError.NOT_FOUND)"

# testing.md.tmpl
TDD_POLICY_DESC: "모든 Service에 단위 테스트 (JUnit5 + MockK), Controller에 통합 테스트"
COVERAGE_TARGET_DESC: "라인 커버리지 80% 이상 (JaCoCo)"
TEST_DATA_POLICY_DESC: "@DataJpaTest, @WebMvcTest, Testcontainers, 팩토리 함수"

# security.md.tmpl
AUDIT_FIELDS_DESC: "모든 엔티티에 createdAt, updatedAt, createdBy, updatedBy (@CreatedDate, @LastModifiedDate)"
SOFT_DELETE_DESC: "핵심 엔티티에 deletedAt 필드 (@SQLDelete, @Where)"
AUTH_POLICY_DESC: "Spring Security + JWT 기반 인증"
AUTHZ_POLICY_DESC: "@PreAuthorize 또는 커스텀 어노테이션 기반 메서드 수준 권한 검사"

# data-model.md.tmpl
ID_STRATEGY_DESC: "Long auto-increment 또는 UUID"
COMMON_FIELDS_DESC: "id, createdAt, updatedAt를 BaseEntity(abstract class)로 공통 관리"
FK_POLICY_DESC: "JPA @ManyToOne, @OneToMany 관계 매핑"
INDEX_STRATEGY_DESC: "@Table(indexes = [...])로 쿼리 패턴 기반 인덱스"

# performance.md.tmpl
CACHE_STRATEGY_DESC: "@Cacheable + Redis (Spring Cache Abstraction)"
RESPONSE_TIME_DESC: "일반 API 200ms 이내, 목록 API 500ms 이내"
ASYNC_POLICY_DESC: "코루틴 또는 @Async + 이벤트 큐"
```

## Kotlin 전용 추가 규칙

### RULE-KT-001: data class 활용
- **원칙**: DTO, VO는 data class로 정의한다
- **위반 기준**: DTO/VO에 일반 class를 사용하면 위반
- **검증 방법**: DTO/VO 클래스에 data 키워드 확인
- **예외**: 상속이 필요한 경우

### RULE-KT-002: null 안전성
- **원칙**: nullable 타입은 최소화하고, !! 연산자 사용을 지양한다
- **위반 기준**: !! 연산자를 사용하면 위반
- **검증 방법**: !! 사용 검색
- **예외**: 테스트 코드
