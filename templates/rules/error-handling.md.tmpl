# 에러 처리 규칙

> 카테고리: ERR
> 이 문서의 규칙은 예외 계층, 에러 코드 체계, 에러 전파 방식을 정의합니다.

## 예외 계층

### RULE-ERR-001: 커스텀 예외 계층
- **원칙**: {{EXCEPTION_HIERARCHY_DESC}}
- **위반 기준**: 범용 예외(Exception, Error, RuntimeException)를 직접 throw하면 위반
- **검증 방법**: throw/raise 문에서 커스텀 예외 클래스 사용 여부 확인
- **예외**: catch 블록에서 다시 throw하는 경우, 유틸리티 함수

### RULE-ERR-002: 예외 분류
- **원칙**: 예외를 비즈니스 예외(사용자 입력 오류)와 시스템 예외(인프라 장애)로 분류한다
- **위반 기준**: 비즈니스 예외와 시스템 예외를 구분하지 않으면 위반
- **검증 방법**: 예외 클래스 계층에서 비즈니스/시스템 구분이 있는지 확인
- **예외**: 없음

## 에러 코드 체계

### RULE-ERR-010: 에러 코드 형식
- **원칙**: {{ERROR_CODE_FORMAT_DESC}}
- **위반 기준**: 에러 코드가 정해진 형식을 따르지 않으면 위반
- **검증 방법**: 에러 코드 상수/enum에서 형식 확인
- **예외**: 프레임워크가 자동 생성하는 에러 코드

### RULE-ERR-011: 에러 메시지
- **원칙**: 에러 메시지는 사용자 친화적이고 디버깅에 유용한 정보를 포함한다
- **위반 기준**: 에러 메시지가 스택 트레이스를 노출하거나, 내부 구현 세부사항을 포함하면 위반
- **검증 방법**: 에러 응답에 민감한 정보가 포함되지 않는지 확인
- **예외**: 개발 환경에서는 상세 에러 허용

## 에러 전파

### RULE-ERR-020: 글로벌 에러 핸들러
- **원칙**: 처리되지 않은 예외는 글로벌 에러 핸들러에서 일관되게 처리한다
- **위반 기준**: 글로벌 에러 핸들러 없이 각 엔드포인트에서 개별 처리하면 위반
- **검증 방법**: 글로벌 에러 핸들러/미들웨어 존재 확인
- **예외**: 없음

### RULE-ERR-021: 에러 로깅
- **원칙**: 모든 예외는 적절한 로그 레벨로 기록한다 (비즈니스=WARN, 시스템=ERROR)
- **위반 기준**: 예외를 삼키거나(catch 후 무시), 부적절한 레벨로 기록하면 위반
- **검증 방법**: catch 블록에서 로깅 코드 존재 여부 확인
- **예외**: 의도적으로 무시하는 경우 주석으로 사유 명시

{{#if CUSTOM_ERR_RULES}}
## 프로젝트 커스텀 에러 처리 규칙

{{CUSTOM_ERR_RULES}}
{{/if}}
